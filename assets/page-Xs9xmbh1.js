import{j as e,r as u,B as x}from"./index-TXvsTRDK.js";import{Z as j}from"./zoomImage-sd5kA6BT.js";function m({data:t}){const[r,o]=u.useState(!1),l=i=>{["IMG","DIV"].includes(i.target.tagName)||o(h=>!h)};return e.jsxs("tr",{onClick:l,children:[e.jsx("td",{children:t.tunner}),e.jsx("td",{children:t.tuneName}),e.jsx("td",{children:t.score}),e.jsxs("td",{children:[t.carType,e.jsx(j,{className:r?"d-block":"d-none",src:`/personal-website${t.pic}`})]}),e.jsx("td",{children:t.preferance.join(" ")}),e.jsx("td",{children:t.shareCode})]})}function p(){const[t,r]=u.useState({isload:!1,tuneList:[],search:"",res:[],asc:!1,ascCol:""}),o=[{key:"tunner",type:"調教者"},{key:"tuneName",type:"調教名稱"},{key:"score",type:"性能分"},{key:"carType",type:"車型"},{key:"preferance",type:"特性"},{key:"shareCode",type:"分享代碼"}],l=s=>{let a=s.target.value.split(" ").map(c=>`(?=.*${c.replace(/^\s|\s$/g,"")})`).filter(c=>c!=="(?=.*)").join("");r(c=>({...c,search:s.target.value,res:t.tuneList.filter(n=>[n.tunner,n.tuneName,n.score,n.carType,n.preferance,n.shareCode.replace(/\s/g,"")].join("|").match(new RegExp(a,"gi")))}))},i=s=>r(a=>({...a,res:a.res.sort((c,n)=>c[s]<n[s]?a.asc?1:-1:c[s]>n[s]?a.asc?-1:1:0),asc:!a.asc,ascCol:s})),h=async()=>{const a=await(await fetch("/personal-website/assets/json/tuneList.json")).json();r(c=>({...c,tuneList:a,res:a}))};return u.useEffect(()=>{h()},[]),e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"py-2 bg-white tuneSearch",content:e.jsx("div",{className:"row",children:e.jsx("input",{type:"search",className:"d-block col-md-6 mx-auto p-2",placeholder:"請輸入關鍵字",onChange:l})})}),e.jsx(x,{content:e.jsx("div",{className:"row overflow-auto py-4",children:e.jsxs("table",{className:"mx-auto text-center text-small",children:[e.jsx("thead",{children:e.jsx("tr",{children:o.map(s=>e.jsxs("th",{className:"pointer",onClick:()=>i(s.key),style:{minWidth:"80px"},children:[s.type,e.jsx("span",{className:`trangle ${t.asc&&"asc"} ${t.ascCol===s.key&&"active"}`})]},s.key))})}),e.jsx("tbody",{children:t.res.map(s=>e.jsx(m,{data:s},s.shareCode))})]})})})]})}const f=[{title:"",content:e.jsx(p,{})}];export{f as default};
